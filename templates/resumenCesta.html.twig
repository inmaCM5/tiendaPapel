{% extends 'base.html.twig' %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('css/slick.css') }}">
    <link rel="stylesheet" href="{{ asset('css/LineIcons.css') }}">
    <link rel="stylesheet" href="{{ asset('css/materialdesignicons.min.css') }}">
    <link rel="stylesheet" href="{{ asset('css/jquery-ui.min.css') }}">
    <link rel="stylesheet" href="{{ asset('css/nice-select.css') }}">
    <link rel="stylesheet" href="{{ asset('css/bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ asset('css/default.css') }}">
    <link rel="stylesheet" href="{{ asset('css/style.css') }}">
{% endblock %}    

{% block contenido %}
    <div class="preloader">
        <div class="loader">
            <div class="ytp-spinner">
                <div class="ytp-spinner-container">
                    <div class="ytp-spinner-rotator">
                        <div class="ytp-spinner-left">
                            <div class="ytp-spinner-circle"></div>
                        </div>
                        <div class="ytp-spinner-right">
                            <div class="ytp-spinner-circle"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="navigation">
        <header class="navbar-style-7 position-relative">
            <div class="navbar-container navbar-sidebar-7">
                <!-- navbar top Start -->
                <div class="navbar-top-wrapper">
                    <div class="container-lg">
                        <div class="navbar-top d-lg-flex justify-content-between">
                            <!-- navbar top left Start -->
                            <div class="navbar-top-left">
                                <ul class="navbar-top-link">
                                    <li><a href="{{ path('contacto') }}">Contacto</a></li>
                                    <li>
                                        <a href="javascript:void(0)">
                                            <i class="mdi mdi-phone-in-talk"></i>
                                            +34 684 00 10 65
                                        </a>
                                    </li>
                                </ul>
                            </div>
                            <!-- navbar top left Ends -->
                            <!-- navbar top right Start -->
                            <div class="navbar-top-right">
                                <ul class="navbar-top-link">
                                    {% if app.user %}
										<li>
                                            <a href="{{ path('logout') }}"><i class="mdi mdi-account"></i>Cerrar sesión
												{{ app.user.username }}</a>
										</li>
									{% else %}
                                        <li>
                                            <a href="{{ path('login') }}"><i class="mdi mdi-account"></i>Iniciar sesión</a>
                                        </li>
									{% endif %}
                                </ul>
                            </div>
                            <!-- navbar top right Ends -->
                        </div>
                    </div>
                </div>
                <!-- navbar top Ends -->
    
                <!-- main navbar Start -->
                <div class="navbar-wrapper">
                    <div class="container-lg">
                        <nav class="main-navbar d-lg-flex justify-content-between align-items-center">
                            <!-- desktop logo Start -->
                            <div class="desktop-logo d-none d-lg-block">
                                <a href="{{ path('index') }}"><img src="{{ asset('imagenes/logo-nombre.jpg') }}" alt="Logo" style="width: 150px;"></a>
                            </div>
                            <!-- desktop logo Ends -->
                            <!-- navbar menu Start -->
                            <div class="navbar-menu">
                                <ul class="main-menu">
                                    <li class="position-static menu-item-has-children">
                                        <a href="#">Categorías</a>
                                        <!-- sub mega dropdown Start -->
                                        <ul class="sub-mega-dropdown">
                                            <li>
                                                <div class="mega-dropdown-menu">
                                                    <ul class="container mega-dropdown d-flex flex-wrap">
                                                    {% for lista in categorias %}
                                                        <li class="mega-dropdown-list menu-item-has-children">  
                                                            <h6 class="heading-6 font-weight-500 mega-title">{{ lista[0].nombre}}
                                                            </h6>
                                                            <ul>
                                                            {% for categoriaSecu in lista[1] %}
                                                                <li>
                                                                    <a href="{{ path('productosCat', {'categoria': categoriaSecu.getId()}) }}">{{ categoriaSecu.nombre }}</a>
                                                                </li>
                                                            {% endfor %}
                                                            </ul>
                                                        </li>
                                                    {% endfor %}
                                                    </ul>
                                                </div>
                                            </li>
                                        </ul>
                                        <!-- sub mega dropdown Ends -->
                                    </li>
                                    <li><a href="{{ path('productos') }}">Productos</a></li>
                                    {% if is_granted('ROLE_ADMIN') %}
                                        <li class="menu-item-has-children">
                                            <a href="#">Administrar...</a>
                                            <ul class="sub-menu">
                                                <li><a href="{{ path('adminCategorias') }}">Administrar categorías</a></li>
                                                <li><a href="{{ path('adminProductos') }}">Administrar productos</a></li>
                                                <li><a href="{{ path('adminPedidos') }}">Administrar pedidos</a></li>
                                            </ul>
                                        </li>
                                    {% endif %}                                    
                                </ul>
                            </div>
                            <!-- navbar menu Ends -->
                            <div></div>
                        </nav>
                    </div>
                </div>
                <!-- main navbar Ends -->
            </div>
            <div class="overlay-7"></div>
        </header>
    </div>

    <section class="breadcrumbs-wrapper pt-50 pb-50 bg-primary-4">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumbs-style breadcrumbs-style-1 d-md-flex justify-content-between align-items-center">
                        <div class="breadcrumb-left">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item">
                                    <a href="{{ path('index') }}">Home</a>
                                </li>
                                <li class="breadcrumb-item active" aria-current="page">Resumen compra</li>
                            </ol>
                        </div>
                        <div class="breadcrumb-right">
                            <h5 class="heading-5 font-weight-500">Resumen compra</h5>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="container pt-50">
        <table class="table table-striped contact-style-2">
            <thead>
                <tr>
                    <a href="{{ path('pedido') }}" class="btn btn-primary float-right mb-4">Comprar</a>
                </tr>
                <tr>
                    <th>Producto</th>
                    <th>Código</th>
                    <th>Unidades</th>
                    <th>PVP</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                {% for produCesta in cesta %}
                    <tr>
                        <td>
                            {{ produCesta.producto.getNombre() }}                       
                        </td>
                        <td>{{ produCesta.producto.getCodigo() }}</td>
						<td>
							<form id="form_seleccion" action="{{ path('cambiarUnidadesResumen', {'idProducto': produCesta.producto.getId()}) }}" method="post">
								<input type="number" name="unidades" min="1" max="{{ produCesta.producto.getUnidades() }}" value="{{ produCesta.unidades }}" size="3">
								<input type='hidden' name='codProduc' value="{{ produCesta.producto.getCodigo() }}"/>
							</form>
						</td>
                        <td>{{ produCesta.producto.getPvp() }}€</td>
                        <td>                            
                            <form id="form_seleccion" class="d-inline" action="{{ path('eliminarProductosCesta', {'idProducto': produCesta.producto.getId()}) }}" method="post">
                                <input type="submit" class="btn btn-danger" value="Eliminar"/>
                            </form>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
		<div class="checkout-sub-total d-flex justify-content-end">
			<h4 class="value">Total precio: {{ precioCesta }}€</h4>
		</div>
    </section>
    
	<section class="footer-style-3 pt-100 pb-100">
		<div class="container">
			<div class="footer-top">
				<div class="row justify-content-center">
					<div class="col-lg-5 col-md-7 col-sm-10">
						<div class="footer-logo text-center">
							<a href="{{ path('index') }}">
								<img src="{{ asset('imagenes/logo-nombre.jpg') }}" alt="">
							</a>
						</div>
						<h5 class="heading-5 text-center mt-30">Follow Us</h5>
						<ul class="footer-follow text-center">
							<li>
								<a href="https://www.facebook.com/impresionacopisteria/">
									<i class="lni lni-facebook-filled"></i>
								</a>
							</li>
							<li>
								<a href="https://www.instagram.com/impresionacopisteria/">
									<i class="lni lni-instagram-original"></i>
								</a>
							</li>
						</ul>
					</div>
				</div>
			</div>

			<div class="footer-widget-wrapper text-center pt-20">
				<div class="row">
					<div class="col-lg-3 col-md-3 col-sm-6">
						<div class="footer-widget">
							<h5 class="footer-title">PRODUCT</h5>

							<ul class="footer-link">
								<li>
									<a href="javascript:void(0)">Quest</a>
								</li>
								<li>
									<a href="javascript:void(0)">Rift S</a>
								</li>
								<li>
									<a href="javascript:void(0)">Gear VR</a>
								</li>
								<li>
									<a href="javascript:void(0)">Apps and Games</a>
								</li>
								<li>
									<a href="javascript:void(0)">Apps and Games</a>
								</li>
								<li>
									<a href="javascript:void(0)">Oculus for Business</a>
								</li>
							</ul>
						</div>
					</div>
					<div class="col-lg-3 col-md-3 col-sm-6">
						<div class="footer-widget">
							<h5 class="footer-title">DEVELOPERS</h5>

							<ul class="footer-link">
								<li>
									<a href="javascript:void(0)">Developer Centre</a>
								</li>
								<li>
									<a href="javascript:void(0)">Docs</a>
								</li>
								<li>
									<a href="javascript:void(0)">Downloads</a>
								</li>
								<li>
									<a href="javascript:void(0)">Tools</a>
								</li>
								<li>
									<a href="javascript:void(0)">Developer Blog</a>
								</li>
								<li>
									<a href="javascript:void(0)">Developer Forums</a>
								</li>
							</ul>
						</div>
					</div>
					<div class="col-lg-3 col-md-3 col-sm-6">
						<div class="footer-widget">
							<h5 class="footer-title">PRODUCT</h5>

							<ul class="footer-link">
								<li>
									<a href="javascript:void(0)">Blog</a>
								</li>
								<li>
									<a href="javascript:void(0)">Careers</a>
								</li>
								<li>
									<a href="javascript:void(0)">Brand Centre</a>
								</li>
								<li>
									<a href="javascript:void(0)">Connect</a>
								</li>
							</ul>
						</div>
					</div>
					<div class="col-lg-3 col-md-3 col-sm-6">
						<div class="footer-widget">
							<h5 class="footer-title">PRODUCT</h5>

							<ul class="footer-link">
								<li>
									<a href="javascript:void(0)">VR for Good</a>
								</li>
								<li>
									<a href="javascript:void(0)">Launch Pad</a>
								</li>
								<li>
									<a href="javascript:void(0)">Creators Lab</a>
								</li>
								<li>
									<a href="javascript:void(0)">Forums</a>
								</li>
								<li>
									<a href="javascript:void(0)">Support</a>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
{% endblock %}

{% block javascripts %}
	<script src="{{ asset('js/popper.min.js') }}"></script>
    <script src="{{ asset('js/bootstrap.min.js') }}"></script>
    <script src="{{ asset('js/vendor/jquery-3.5.1.min.js') }}"></script>
    <script src="{{ asset('js/vendor/modernizr-3.7.1.min.js') }}"></script>
    <script src="{{ asset('js/slick.min.js') }}"></script>
    <script src="{{ asset('js/jquery-vj-accordion-steps.js') }}"></script>
    <script src="{{ asset('js/jquery-ui.min.js') }}"></script>
    <script src="{{ asset('js/jquery.form-validator.min.js') }}"></script>
    <script src="{{ asset('js/jquery.nice-select.min.js') }}"></script>
    <script src="{{ asset('js/jquery.formatter.min.js') }}"></script>
    <script src="{{ asset('js/count-up.min.js') }}"></script>
    <script src="{{ asset('js/main.js') }}"></script>
{% endblock %}